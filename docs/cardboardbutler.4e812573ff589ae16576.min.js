!function(e){function t(t){for(var r,i,s=t[0],l=t[1],c=t[2],p=0,d=[];p<s.length;p++)i=s[p],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);d.length;)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={0:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;a.push([290,1]),n()}({290:function(e,t,n){"use strict";(function(e){var r;(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(66),i=n(307),s=n(309);n(529);var l,c,u=document.getElementById("content");a.render(o.createElement(i.AppContainer,null,o.createElement(s.default,null)),u),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&l.register(u,"rootEl","/app/src/index.tsx"),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)}).call(this,n(37)(e))},309:function(e,t,n){"use strict";(function(e){var r;(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var l,c,u=n(0),p=n(310),d=n(332),f=n(527),m=n(161),g=n(528),h=function(e){var t=e.userValidator,n=e.onNameSelect,r=e.showWarning;return u.createElement("div",{className:"ui middle aligned center aligned grid givenames","data-testid":"WelcomePage"},u.createElement("div",{className:"column"},u.createElement("div",null,u.createElement(m.Header,{as:"h3"},u.createElement("span",null,"Good day, how can I help you today?"))),u.createElement("div",{className:"ui large form"},u.createElement("div",{className:"ui"},u.createElement(g.default,{userValidator:t,onNameSelect:n}))),r&&u.createElement(m.Message,null,u.createElement(m.Message.Header,null,"BGG is taking a breather"),u.createElement("p",null,"Boardgame Geek has a limit on how many requests I can make. Unfortunatly the limit has been hit for a while, so try agian in a couple of minutes (or 10)."))))},y=u.memo(h),v={names:[],games:[],loadingInfo:[],showingCollection:!1,showBackoff:!1},b=function(e){function t(t){var n=e.call(this,t)||this;n.collectionMerger=new f.CollectionMerger,n.onNameSelect=n.onNameSelect.bind(n),n.userValidator=n.userValidator.bind(n),n.handleHashChange=n.handleHashChange.bind(n);var r=t.bggServce||new p.default;return n.loader=new f.default(r,n.collectionMerger,!0),n.loader.onGamesUpdate((function(e){n._ismounted&&n.setState({games:e,showingCollection:!0})})),n.loader.onLoadUpdate((function(e){n._ismounted&&n.setState({loadingInfo:e})})),n.state=v,window.addEventListener("hashchange",n.handleHashChange,!1),n}return a(t,e),t.prototype.componentDidMount=function(){this._ismounted=!0,this.handleHashChange()},t.prototype.handleHashChange=function(){var e=window.location.hash.substr(0);if(e&&""!==e&&e.indexOf("usernames=")>-1){var t=e.substring("usernames=".length+1).split(",");this.onNameSelect(t)}else this.setState(v)},t.prototype.componentWillUnmount=function(){window.removeEventListener("hashchange",this.handleHashChange,!1),this._ismounted=!1},t.prototype.getBggService=function(){return this.props.bggServce||new p.default},t.prototype.onNameSelect=function(e){var t=this;console.log("[DEBUG] App: onNameSelect called with",e),e.join(",")!==this.state.names.join(",")?(this.setState({names:e}),window.location.hash="usernames="+e.join(","),this._ismounted&&(console.log("[DEBUG] App: Loading collections for",e),this.loader.loadCollections(e).then((function(){t.loader.loadExtendedInfo().then((function(){t.loader.loadPlays()}))})))):console.log("[DEBUG] App: Names unchanged, skipping load")},t.prototype.userValidator=function(e){return i(this,void 0,void 0,(function(){var t,n;return s(this,(function(r){switch(r.label){case 0:return console.log("[DEBUG] App: userValidator invoked for '"+e+"'"),[4,this.getBggService().getUserInfo(e)];case 1:return t=r.sent(),console.log("[DEBUG] App: userValidator result for '"+e+"':",t),"unknown"===t.isValid&&"backoff"===t.error?(console.warn("[DEBUG] App: Backoff triggered"),this.setState({showBackoff:!0}),[2,!1]):((n=!0===t.isValid)&&this.setState({showBackoff:!1}),[2,n])}}))}))},t.prototype.render=function(){var e=this.state,t=e.loadingInfo,n=void 0===t?[]:t,r=e.games,o=e.showingCollection,a=e.names,i=e.showBackoff,s=n.filter((function(e){return"collection"===e.type})).map((function(e){return"collection"===e.type?e.username:""})),l=s.length>0,c=n.filter((function(e){return"game"===e.type})),p=n.filter((function(e){return"plays"===e.type})),f={position:"fixed",borderRadius:30,bottom:0,height:120,left:"20%",right:"20%",padding:40,backgroundColor:"white"};return u.createElement("span",null,!o&&!l&&u.createElement(y,{onNameSelect:this.onNameSelect,userValidator:this.userValidator,showWarning:i}),l&&0===r.length&&u.createElement(m.Dimmer,{active:!0,inverted:!0},u.createElement(m.Loader,{inverted:!0,content:"Finding games for "+s.join(", ")})),o&&(r.length>0||!l)&&u.createElement(d.default,{currentUsers:this.state.names,games:r}),l&&r.length>0&&u.createElement("div",{style:f},u.createElement(m.Loader,{active:!0,inline:"centered",content:"Finding games for "+s.join(", ")})),r.length>0&&c.length>0&&u.createElement("div",{style:f},u.createElement(m.Progress,{indicating:!0,value:r.length-c.length,total:r.length,progress:"ratio"},"Getting more game info")),r.length>0&&p.length>0&&u.createElement("div",{style:f},u.createElement(m.Progress,{indicating:!0,value:a.length-p.length,total:a.length,progress:"ratio"},"Finding plays for ",p.map((function(e){return e.username})).join(", "))))},t}(u.Component);t.default=b,(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(l.register(a,"__extends","/app/src/components/App.tsx"),l.register(i,"__awaiter","/app/src/components/App.tsx"),l.register(s,"__generator","/app/src/components/App.tsx"),l.register(h,"WelcomePage","/app/src/components/App.tsx"),l.register(y,"MemoizedWelcomePage","/app/src/components/App.tsx"),l.register(v,"initialState","/app/src/components/App.tsx"),l.register(b,"App","/app/src/components/App.tsx")),(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&c(e)}).call(this,n(37)(e))},310:function(e,t,n){"use strict";(function(e){var r;(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,s=a.length;i<s;i++,o++)r[o]=a[i];return r};Object.defineProperty(t,"__esModule",{value:!0});var s,l,c=n(311),u=function(){function e(e){this.fetchService=e||fetch}return e.prototype.getUserCollection=function(e){return o(this,void 0,void 0,(function(){var t,n,r,o=this;return a(this,(function(a){switch(a.label){case 0:return[4,this.fetchCollectionXml(e)];case 1:return"string"!=typeof(t=a.sent())?[2,t]:void 0===(n=c.xml2js(t)).elements||void 0===(r=n.elements[0].elements)?[2,[]]:[2,r.map((function(t){var n=t.elements,r=function(e){return o.getTagValue(n,e)},a=o.getPlayStatsFromCollection(n),i=r("yearpublished"),s=void 0===i?void 0:parseInt(i,10),l=parseInt(t.attributes.objectid);return Object.assign({id:l,averagerating:o.getAverageRating(n),name:r("name"),thumbnailUrl:r("thumbnail"),yearPublished:s,imageUrl:r("image"),families:o.getFamilies(n),userRating:o.getUserRating(e,n)},a)}))]}}))}))},e.prototype.getUserInfo=function(e){return o(this,void 0,void 0,(function(){var t,n,r;return a(this,(function(o){switch(o.label){case 0:return console.log("[DEBUG] BggGameService: getUserInfo called for "+e),[4,this.fetchUserInfoXml(e)];case 1:if("string"!=typeof(t=o.sent()))return console.error("[DEBUG] BggGameService: getUserInfo failed for "+e,t),[2,{isValid:"unknown",error:t.error}];if((n=c.xml2js(t)).elements){if(!(r=n.elements[0].attributes))return[2,{isValid:"unknown",error:"Bgg is likely processing"}];if(""!==r.id)return[2,{isValid:!0,username:r.name}]}return[2,{isValid:!1}]}}))}))},e.prototype.getGamesInfo=function(e){return o(this,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:return[4,this.fetchGamesXml(e)];case 1:return"string"==typeof(t=r.sent())?(n=c.xml2js(t),[2,n.elements[0].elements.map(this.elementToExtendedInfo)]):[2,t]}}))}))},e.prototype.getPlays=function(e){return o(this,void 0,void 0,(function(){var t,n,r,o,s,l,c,u=this;return a(this,(function(a){switch(a.label){case 0:return[4,this.getPlaysPage(e)];case 1:return"plays"in(t=a.sent())?(n=t.plays,r=t.totalPlays,t.totalPlays>t.plays.length?(o=Math.ceil(r/n.length)-1,s=new Array(o).fill(0).map((function(t,n){return u.getPlaysPage(e,n+2)})),[4,Promise.all(s)]):[3,3]):[3,5];case 2:return l=a.sent(),c=l.reduce((function(e,t){return"plays"in t?e.concat(t.plays):e}),[]),[2,i(n,c)];case 3:return[2,n];case 4:return[3,6];case 5:return[2,t];case 6:return[2]}}))}))},e.prototype.getPlaysPage=function(e,t){return void 0===t&&(t=1),o(this,void 0,void 0,(function(){var n,r,o,i;return a(this,(function(a){switch(a.label){case 0:return[4,this.fetchPlaysXml(e,t)];case 1:return"string"==typeof(n=a.sent())?(r=c.xml2js(n),void 0===(o=r.elements[0]).elements?[2,{totalPlays:0,pageNumber:t,plays:[]}]:(i=o.elements,[2,{totalPlays:parseInt(o.attributes.total.toString()),pageNumber:t,plays:i.map(this.elementToPlayInfo)}])):[2,n]}}))}))},e.prototype.elementToPlayInfo=function(e){return{date:new Date(e.attributes.date),gameId:parseInt(e.elements[0].attributes.objectid.toString()),length:parseInt(e.attributes.length.toString()),playId:parseInt(e.attributes.id.toString()),quantity:parseInt(e.attributes.quantity.toString())}},e.prototype.elementToExtendedInfo=function(e){var t=e.elements,n=t.find((function(e){return"poll"===e.name&&"suggested_numplayers"===e.attributes.name})).elements.map((function(e){var t=e.attributes.numplayers.toString(),n=t.indexOf("+")>-1?1/0:parseInt(t,10),r=function(t){return parseInt(e.elements.find((function(e){return"result"===e.name&&e.attributes.value.toString()===t})).attributes.numvotes)};if(e.elements)return{numberOfPlayers:n,best:r("Best"),recommended:r("Recommended"),notRecommended:r("Not Recommended")}})).filter((function(e){return e})).reduce((function(e,t){var n;return Object.assign(e,((n={})[t.numberOfPlayers]=t,n))}),{}),r=function(e){return t.filter((function(t){return"link"===t.name&&t.attributes.type===e})).map((function(e){return e.attributes.value.toString()}))};return{description:t.find((function(e){return"description"===e.name})).elements[0].text.toString().trim(),weight:parseFloat(t.find((function(e){return"statistics"===e.name})).elements[0].elements.find((function(e){return"averageweight"===e.name})).attributes.value.toString().trim()),mechanics:r("boardgamemechanic"),categories:r("boardgamecategory"),suggestedNumberOfPlayers:n}},e.prototype.getFetch=function(){return this.fetchService},e.prototype.getAverageRating=function(e){var t=this.getRatingElement(e).elements.find((function(e){return"average"===e.name})).attributes.value;return parseFloat(t.toString())},e.prototype.getStatsElement=function(e){return e.find((function(e){return"stats"===e.name}))},e.prototype.getRatingElement=function(e){return this.getStatsElement(e).elements[0]},e.prototype.getPlayStatsFromCollection=function(e){var t=this.getStatsElement(e).attributes,n=function(e){return t[e]&&parseInt(t[e].toString())};return{minPlayers:n("minplayers"),numberOwned:n("numowned"),maxPlayers:n("maxplayers"),minPlaytime:n("minplaytime"),maxPlaytime:n("maxplaytime"),playingTime:n("playingtime")}},e.prototype.getUserRating=function(e,t){var n=this.getRatingElement(t).attributes.value,r="N/A"===n||void 0===n?null:parseFloat(n),o={};return o[e]=r,o},e.prototype.getFamilies=function(e){return this.getRanks(e).filter((function(e){return"family"===e.type}))},e.prototype.getRanks=function(e){return this.getRatingElement(e).elements.find((function(e){return"ranks"===e.name})).elements.map((function(e){var t=e.attributes;return{name:t.name.toString(),friendlyName:t.friendlyname.toString(),bayesaverage:parseFloat(t.bayesaverage.toString()),value:parseInt(t.value.toString()),type:t.type.toString()}}))},e.prototype.getTagValue=function(e,t){var n=e.find((function(e){return e.name===t}));if(n&&n.elements)return n.elements[0].text.toString()},e.prototype.fetchCollectionXml=function(e){return o(this,void 0,void 0,(function(){var t;return a(this,(function(n){return t=this.buildCollectionUrl(e),[2,this.fetchXml(t)]}))}))},e.prototype.fetchGamesXml=function(e){return o(this,void 0,void 0,(function(){var t;return a(this,(function(n){return t=this.buildGameUrls(e),[2,this.fetchXml(t)]}))}))},e.prototype.fetchPlaysXml=function(e,t){return o(this,void 0,void 0,(function(){var n;return a(this,(function(r){return n=this.buildPlaysUrl(e,t),[2,this.fetchXml(n)]}))}))},e.prototype.fetchXml=function(e){return o(this,void 0,void 0,(function(){var t,n,r,i,s=this;return a(this,(function(l){switch(l.label){case 0:t=function(e){return o(s,void 0,void 0,(function(){var t=this;return a(this,(function(n){return console.log("[DEBUG] BggGameService: Attempting fetch: "+e),[2,this.getFetch()(e,{credentials:"omit"}).then((function(n){return o(t,void 0,void 0,(function(){return a(this,(function(t){if(console.log("[DEBUG] BggGameService: Response status for "+e+": "+n.status),200===n.status)return[2,n.text()];if(429===n.status)return console.warn("[DEBUG] BggGameService: 429 Rate Limit Hit for "+e),[2,{retryLater:!0,backoff:!0}];throw new Error("Status "+n.status)}))}))}))]}))}))},l.label=1;case 1:return l.trys.push([1,3,,8]),[4,t(e)];case 2:return[2,l.sent()];case 3:n=l.sent(),console.warn("[DEBUG] BggGameService: Direct fetch failed for "+e+", trying proxy. Error:",n),r="https://corsproxy.io/?url="+encodeURIComponent(e),l.label=4;case 4:return l.trys.push([4,6,,7]),[4,t(r)];case 5:return[2,l.sent()];case 6:return i=l.sent(),console.error("[DEBUG] BggGameService: Proxy fetch failed for "+r,i),[2,{retryLater:!0,error:i}];case 7:return[3,8];case 8:return[2]}}))}))},e.prototype.fetchUserInfoXml=function(e){return o(this,void 0,void 0,(function(){var t,n,r,i,s,l=this;return a(this,(function(c){switch(c.label){case 0:t=this.buildUserUrl(e),n=function(e){return o(l,void 0,void 0,(function(){var t=this;return a(this,(function(n){return console.log("[DEBUG] BggGameService: UserInfo fetch: "+e),[2,this.getFetch()(e,{credentials:"omit"}).then((function(n){return o(t,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return console.log("[DEBUG] BggGameService: UserInfo Response status for "+e+": "+n.status),200!==n.status&&202!==n.status?[3,2]:[4,n.text()];case 1:return[2,t.sent()];case 2:if(429===n.status)return console.warn("[DEBUG] BggGameService: UserInfo 429 Rate Limit"),[2,{error:"backoff"}];throw new Error("Status "+n.status)}}))}))}))]}))}))},c.label=1;case 1:return c.trys.push([1,3,,8]),[4,n(t)];case 2:return[2,c.sent()];case 3:r=c.sent(),console.warn("[DEBUG] BggGameService: Direct UserInfo fetch failed for "+t+", trying proxy. Error:",r),i="https://corsproxy.io/?url="+encodeURIComponent(t),c.label=4;case 4:return c.trys.push([4,6,,7]),[4,n(i)];case 5:return[2,c.sent()];case 6:return s=c.sent(),console.error("[DEBUG] BggGameService: Proxy UserInfo fetch failed for "+i,s),[2,{error:s}];case 7:return[3,8];case 8:return[2]}}))}))},e.prototype.buildPlaysUrl=function(e,t){var n="https://api.geekdo.com/xmlapi2/plays?username="+e;return t>1?n+"&page="+t:n},e.prototype.buildGameUrls=function(e){return"https://api.geekdo.com/xmlapi2/thing?id="+e.join(",")+"&stats=1"},e.prototype.buildCollectionUrl=function(e){return"https://api.geekdo.com/xmlapi2/collection?username="+e+"&own=1&stats=1&excludesubtype=boardgameexpansion"},e.prototype.buildUserUrl=function(e){return"https://api.geekdo.com/xmlapi2/user?name="+e},e}();t.default=u,(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(s.register(o,"__awaiter","/app/src/services/BggGameService.ts"),s.register(a,"__generator","/app/src/services/BggGameService.ts"),s.register(i,"__spreadArrays","/app/src/services/BggGameService.ts"),s.register(u,"BggGameService","/app/src/services/BggGameService.ts")),(l="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&l(e)}).call(this,n(37)(e))},318:function(e,t){},320:function(e,t){},332:function(e,t,n){"use strict";(function(e){var r;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var a,i=this&&this.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,s=a.length;i<s;i++,o++)r[o]=a[i];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.GameListItem=t.FilterBar=t.playercountOptions=t.DescriptionGenerator=void 0;var l=n(0),c=n(161),u=n(526),p=["Outstanding","Outstanding","Very good","Good","Ok","Mediocre","Not so good","Bad","Very bad","Awful"].reverse(),d=["Very easy","Easy","Moderately difficult","Somewhat hard","Hard","Very Hard"],f=function(){function e(){this.getWeightInfo=function(e){var t=e.weight,n=Math.round((t-1)/5*6);return d[Math.max(n,0)].toLowerCase()}}return e.prototype.generateDescription=function(e){var t=this.getRatingDescription(e.averagerating),n=this.getFamilyDescription(e),r=this.getPlayerInfoString(e),o=this.getTimeInfoString(e),a=this.getAOrAn(n)+" "+n+" for "+r+" in "+o+".",i="weight"in e&&void 0!==e.weight;((i||void 0!==e.averagerating)&&(a+=" Most people think it is "),void 0!==e.averagerating&&(a+=t.toLowerCase(),i||(a+=".")),i&&void 0!==e.averagerating&&(a+=" and "),i)&&(a+=this.getWeightInfo(e)+" to learn.");return a},e.prototype.isVowel=function(e){return"aeiouAEIOU".indexOf(e)>-1},e.prototype.getAOrAn=function(e){return this.isVowel(e.charAt(0))?"An":"A"},e.prototype.getFamilyDescription=function(e){if(void 0===e.families||0===e.families.length)return"boardgame";var t=e.families.sort((function(e,t){return e.value-t.value}))[0].friendlyName.toLowerCase();return t.indexOf(" rank")>-1&&(t=t.substring(0,t.indexOf(" rank"))),t.endsWith("game")||(t+=" game"),t},e.prototype.getRatingDescription=function(e){var t=Math.round(e),n=p[t-1];return n||""},e.prototype.getPlayerInfoString=function(e){var t="",n=e.minPlayers,r=e.maxPlayers;return t+=n===r?r+" player":n+" to "+r+" player",r>1&&(t+="s"),t},e.prototype.getTimeInfoString=function(e){var t="",n=e.minPlaytime,r=e.maxPlaytime;return t+=n===r?r+" minute":r<n?n+" minute":n+" - "+r+" minute",r>1&&(t+="s"),t},e}();t.DescriptionGenerator=f,t.playercountOptions=[{text:"any number of players",value:0,playercount:null},{text:"1 person",value:1,playercount:1}];for(var m=2;m<=10;m++)t.playercountOptions.push({text:m+" people",value:m,playercount:m});var g={filterOptions:{}},h=function(e){function n(t){var n=e.call(this,t)||this;return n.state=g,n.getSortOptionFromIndex=n.getSortOptionFromIndex.bind(n),n.getSortOptionFromIndexSingle=n.getSortOptionFromIndexSingle.bind(n),n.getDropdownValues=n.getDropdownValues.bind(n),n.getSortOptions=n.getSortOptions.bind(n),n}return i(n,e),n.prototype.getOptions=function(){return[{text:"any time",value:0,playtime:null},{text:"30 minutes or less",value:1,playtime:{minimum:0,maximum:30}},{text:"1 hour or less",value:2,playtime:{maximum:60}},{text:"2 hours or less",value:3,playtime:{maximum:120}},{text:"3 hours or less",value:4,playtime:{maximum:180}},{text:"20-60 minutes",value:5,playtime:{minimum:20,maximum:60}},{text:"1-2 hours",value:6,playtime:{minimum:60,maximum:120}},{text:"2-4 hours",value:7,playtime:{minimum:120,maximum:240}},{text:"4 or more hours",value:8,playtime:{minimum:240,maximum:9999999}}]},n.prototype.getSortOptions=function(){var e,t,n,r,o=this.state.filterOptions.sortOption,a=Array.isArray(o),i=this.props.currentUsers,l=(void 0===i?["Unknown"]:i).length<=1?"I":"we",c=[{text:"are highly rated",value:0,sortoption:"bggrating"},{text:"are alphabetic",value:1,sortoption:"alphabetic"},(e={text:"are new",value:2,sortoption:"new"},e["data-testid"]="sortByNew",e),{text:"are old",value:3,sortoption:"old"},{text:l+" rate highly",value:4,sortoption:"userrating"},{text:"are easy to learn",value:5,sortoption:"weight-light"},{text:"are complex",value:6,sortoption:"weight-heavy"},(t={text:"are best with this number of players",value:7},t["data-testid"]="suggestedPlayers",t),{text:l+" played recently",value:8,sortoption:"playedRecently"},{text:l+" haven't played in a while",value:9,sortoption:"playedLongAgo"},{text:l+" have played a lot",value:10,sortoption:"playedALot"},{text:l+" have not played a lot",value:11,sortoption:"playedNotALot"}],u=((n={text:l+" only have one preference",value:12})["data-testid"]="SortBySingleOption",n),p=((r={text:l+" have multiple preferences",value:12})["data-testid"]="SortByMultipleOption",r);return s(c,[a?u:p])},n.prototype.onTimeChange=function(e){var t=this.getOptions()[e].playtime;this.combineState({playtime:t})},n.prototype.onPlayerCountChange=function(e){var n=this,r=t.playercountOptions[e].playercount,a=this.state.filterOptions.sortOption;Array.isArray(a)?this.combineState({playerCount:r,sortOption:a.map((function(e){return"object"===o(e)?Object.assign({},n.state.filterOptions.sortOption,{numberOfPlayers:r}):e}))}):"object"===o(a)?this.combineState({playerCount:r,sortOption:Object.assign({},this.state.filterOptions.sortOption,{numberOfPlayers:r})}):this.combineState({playerCount:r})},n.prototype.onSortChange=function(e){var t=this.state.filterOptions.sortOption;12===e||Array.isArray(e)&&e.indexOf(12)>-1?Array.isArray(t)?this.combineState({sortOption:t[0]}):this.combineState({sortOption:[t]}):Array.isArray(e)?this.combineState({sortOption:this.getSortOptionFromIndex(e)}):this.combineState({sortOption:this.getSortOptionFromIndexSingle(e)})},n.prototype.getSortOptionFromIndex=function(e){return 0===e.length?this.getSortOptions()[0]:e.map(this.getSortOptionFromIndexSingle)},n.prototype.getSortOptionFromIndexSingle=function(e){var t=this.getSortOptions(),n=t[e].sortoption;return void 0===n&&7===t[e].value&&(n={type:"suggestedPlayers",numberOfPlayers:this.state.filterOptions.playerCount}),n},n.prototype.combineState=function(e){var t=Object.assign({},this.state.filterOptions,e);this.props.onFilterChange&&this.props.onFilterChange(t),this.setState({filterOptions:t})},n.prototype.joinWithAndEnd=function(e){if(1===e.length)return e[0];var t=s(e),n=t.pop();return t.join(", ")+" and "+n},n.prototype.getDropdownValues=function(){var e=this.state.filterOptions.sortOption,t=this.getSortOptions();if(void 0!==e)return Array.isArray(e)?1===e.length&&void 0===e[0]?[]:e.map((function(e){return"object"===o(e)?7:t.findIndex((function(t){return t.sortoption===e}))})):"object"===o(e)?7:t.findIndex((function(t){return t.sortoption===e}))},n.prototype.render=function(){var e=this,n=this.props.currentUsers,r=void 0===n?["Unknown"]:n,o=this.state.filterOptions.sortOption,a=Array.isArray(o),i=r.length<=1,s=i?"I":"we",u=i?"am":"are",p=this.getSortOptions(),d=this.getDropdownValues(),f=this.getOptions();return l.createElement(c.Container,{fluid:!0},l.createElement("div",{className:"topMenu ui fixed"},l.createElement("div",{className:"ui container"},l.createElement("span",{className:"topselect"},l.createElement("span",null,"Hi ",s,"  ",u," "),l.createElement("span",null,l.createElement("a",{href:"#"},l.createElement("b",null,this.joinWithAndEnd(r)))),l.createElement("span",null," ",s,"  ",u," looking for a "),l.createElement("span",null,"boardgame "),l.createElement("span",{className:"topselect"},l.createElement("span",null,"that plays in "),l.createElement(c.Dropdown,{inline:!0,placeholder:"any time","data-testid":"PlaytimeDropdown",options:f,closeOnChange:!0,onChange:function(t,n){return e.onTimeChange(n.value)}}))),l.createElement("span",{className:"topselect"},l.createElement("span",null,"with "),l.createElement(c.Dropdown,{inline:!0,placeholder:"any number of players","data-testid":"PlayercountDropdown",options:t.playercountOptions,closeOnChange:!0,onChange:function(t,n){return e.onPlayerCountChange(n.value)}})),l.createElement("span",{className:"topselect"},l.createElement("span",null,"and ",s," prefer games that "),l.createElement(c.Dropdown,{inline:!0,placeholder:p[0].text,"data-testid":"SortOptionDropdown",options:this.getSortOptions(),multiple:a,closeOnChange:!a,value:d,onChange:function(t,n){return e.onSortChange(n.value)}})))))},n}(l.Component);t.FilterBar=h;var y=new f,v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.item,n=e.size,r=t.owners,o=void 0===r?[]:r;return l.createElement(c.Item,null,l.createElement(c.Item.Image,{size:n},l.createElement("img",{"data-testid":"GameImage",src:t.imageUrl})),l.createElement(c.Item.Content,{verticalAlign:"middle"},l.createElement(c.Item.Header,{"data-testid":"GameName",href:"https://boardgamegeek.com/boardgame/"+t.id,as:"a",size:n,target:"_blank"},t.name),l.createElement(c.Item.Meta,{"data-testid":"GameYear"},l.createElement("span",null,t.yearPublished),t.owners&&l.createElement("span",{"data-testid":"Owners"}," - ",l.createElement("span",null,o.join(", ")))),l.createElement(c.Item.Description,{"data-testid":"GameDescription"},y.generateDescription(t)),"categories"in t&&l.createElement(c.Item.Extra,null,t.categories.join(", "))))},t}(l.PureComponent);t.GameListItem=v;var b,S,w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this.props,t=e.item,n=e.size,r=t.owners,o=void 0===r?[]:r;return l.createElement(c.Card,{size:n},l.createElement(c.Image,{src:t.imageUrl,size:"massive",wrapped:!0,ui:!1}),l.createElement(c.Card.Content,null,l.createElement(c.Card.Header,null,t.name),l.createElement(c.Card.Meta,null,l.createElement("span",{className:"date"},(t.yearPublished||"")+" - "+o.join(", "))),l.createElement(c.Card.Description,null,y.generateDescription(t))),l.createElement(c.Card.Content,{extra:!0},"categories"in t&&t.categories&&t.categories.join(", ")))},t}(l.PureComponent),G={pickedGame:void 0,gamesAlreadyShown:[]},x=function(e){function t(t){var n=e.call(this,t)||this;return n.state=G,n.pickARandomGame=n.pickARandomGame.bind(n),n.close=n.close.bind(n),n}return i(t,e),t.prototype.pickARandomGame=function(){var e=this,t=this.props.games,n=s(this.state.gamesAlreadyShown),r=t.filter((function(e){return n.every((function(t){return t.id!==e.id}))}));0===r.length&&(n=[],r=t);var o=new Array(3).fill(0).map((function(){return e.randomInteger(0,r.length-1)})).reduce((function(e,t){return Math.min(e,t)}),Math.ceil((r.length-1)/2)),a=r[o];n.push(a),this.setState({pickedGame:a,gamesAlreadyShown:n})},t.prototype.randomInteger=function(e,t){return Math.floor(Math.random()*t)+e},t.prototype.close=function(){this.setState(G)},t.prototype.render=function(){var e=this,t=this.state.pickedGame;return t?l.createElement(c.Dimmer,{inverted:!0,active:!0,onClick:this.close},l.createElement(c.Container,null,l.createElement(c.Segment,null,l.createElement(c.Header,{as:"h3"},"What about this game?"),l.createElement(c.Item.Group,null,l.createElement(v,{size:"large",item:t})),l.createElement(c.Button,{className:"large",color:"black",onClick:function(t){t.stopPropagation(),e.pickARandomGame()}},l.createElement(c.Icon,{name:"cube"}),"Find another")))):l.createElement(c.Container,{text:!0},l.createElement(c.Button,{fluid:!0,basic:!0,onClick:function(t){t.stopPropagation(),e.pickARandomGame()}},l.createElement(c.Icon,{name:"cube"}),"Pick a game for me!"))},t}(l.Component),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this.props.games;return l.createElement(c.Item.Group,null,e.map((function(e){return l.createElement(v,{key:e.id,item:e})})))},t}(l.PureComponent),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){var e=this.props.games;return l.createElement(c.Card.Group,{centered:!0},e.map((function(e){return l.createElement(w,{key:e.id,item:e})})))},t}(l.PureComponent),I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){return l.createElement(c.Header,{as:"h2",icon:!0,textAlign:"center","data-testid":"nogames"},l.createElement(c.Icon,{name:"frown",circular:!0}),l.createElement(c.Header.Content,null,l.createElement("span",null,"Sorry, I could not find any games that match what you are looking for.")))},t}(l.PureComponent),P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.render=function(){return l.createElement(c.Container,{text:!0,className:"Footer"},l.createElement(c.Divider,null),l.createElement(c.List,{horizontal:!0},l.createElement(c.List.Item,null,l.createElement(c.Header,{className:"faded",as:"h5"},l.createElement("a",{href:"about.html"},"About Cardboard Butler "))),l.createElement(c.List.Item,null,l.createElement(c.Header,{className:"faded",as:"h5"},l.createElement("a",{href:"https://github.com/PhilipK/CardboardButler"},"Github Page"))),l.createElement(c.List.Item,null,l.createElement(c.Header,{className:"faded",as:"h5"},l.createElement("a",{href:"https://boardgamegeek.com/support"},"Support BGG")))),l.createElement(c.Divider,{hidden:!0}))},t}(l.PureComponent),A=function(e){function t(t){var n=e.call(this,t)||this;return n.onFilterChange=n.onFilterChange.bind(n),n.onSetViewType=n.onSetViewType.bind(n),n.state={filterOptions:{},viewType:"list"},n}return i(t,e),t.prototype.onFilterChange=function(e){this.setState({filterOptions:e})},t.prototype.onSetViewType=function(e){this.setState({viewType:e})},t.prototype.render=function(){var e=this,t=this.props,n=t.games,r=void 0===n?[]:n,o=t.currentUsers,a=void 0===o?[]:o,i=this.state.viewType,s=(new u.GamesFilterAndSorter).filterAndSort(r,this.state.filterOptions),p=0===s.length;return l.createElement("div",{"data-testid":"CollectionPage"},l.createElement("div",{style:{position:"absolute",top:20,right:20}},l.createElement(c.Icon,{size:"small",inverted:"list"===i,bordered:!0,circular:!0,name:"list",onClick:function(){return e.onSetViewType("list")}}),l.createElement(c.Icon,{size:"small",inverted:"grid"===i,bordered:!0,circular:!0,name:"grid layout",onClick:function(){return e.onSetViewType("grid")}})),l.createElement(c.Container,{fluid:!0,textAlign:"center",className:"logoHeader"},l.createElement(c.Header,{as:"h1"},l.createElement("span",{className:"logoscript"},"Cardboard Butler"))),l.createElement(h,{onFilterChange:this.onFilterChange,currentUsers:a}),p&&l.createElement(I,null),s.length>0&&l.createElement(c.Container,{text:!0,fluid:!0},l.createElement(x,{games:s}),l.createElement(c.Divider,{hidden:!0})),l.createElement(c.Container,{fluid:!0,text:"list"===i},"list"===i&&l.createElement(E,{games:s}),"grid"===i&&l.createElement(C,{games:s})),l.createElement(P,null))},t}(l.Component);t.default=A,(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(b.register(i,"__extends","/app/src/components/CollectionPage.tsx"),b.register(s,"__spreadArrays","/app/src/components/CollectionPage.tsx"),b.register(p,"ratingNames","/app/src/components/CollectionPage.tsx"),b.register(d,"weightName","/app/src/components/CollectionPage.tsx"),b.register("aeiouAEIOU","vowel_list","/app/src/components/CollectionPage.tsx"),b.register(f,"DescriptionGenerator","/app/src/components/CollectionPage.tsx"),b.register(m,"i","/app/src/components/CollectionPage.tsx"),b.register(g,"filterBarInitialState","/app/src/components/CollectionPage.tsx"),b.register(h,"FilterBar","/app/src/components/CollectionPage.tsx"),b.register(y,"gameDescription","/app/src/components/CollectionPage.tsx"),b.register(v,"GameListItem","/app/src/components/CollectionPage.tsx"),b.register(w,"GameCardItem","/app/src/components/CollectionPage.tsx"),b.register(G,"pickAGameInitialState","/app/src/components/CollectionPage.tsx"),b.register(x,"PickAGameForMe","/app/src/components/CollectionPage.tsx"),b.register(E,"CollectionList","/app/src/components/CollectionPage.tsx"),b.register(C,"CollectionGrid","/app/src/components/CollectionPage.tsx"),b.register(I,"NoGamesFound","/app/src/components/CollectionPage.tsx"),b.register(P,"Footer","/app/src/components/CollectionPage.tsx"),b.register(A,"CollectionPage","/app/src/components/CollectionPage.tsx")),(S="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&S(e)}).call(this,n(37)(e))},526:function(e,t,n){"use strict";(function(e){var r;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var a=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,s=a.length;i<s;i++,o++)r[o]=a[i];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.GamesFilterAndSorter=t.GameFilterer=t.GameSorter=t.YoungSorter=t.UserRatingSorter=t.SuggestedPlayersSorter=t.RecentlyPlayedSorter=t.PlayedNotALotSorter=t.PlayedLongAgoSorter=t.PlayedALotSorter=t.OldSorter=t.NameSorter=t.MultiSorter=t.LightSorter=t.HeavySorter=t.BggRatingSorter=void 0;var i=n(257),s=function(){function e(){}return e.prototype.sort=function(e){return e.sort(this.averageRatingSorter)},e.prototype.averageRatingSorter=function(e,t){return t.averagerating-e.averagerating},e}();t.BggRatingSorter=s;var l=function(){function e(){}return e.prototype.sort=function(e){return e.sort(this.weightHeavySort)},e.prototype.weightHeavySort=function(e,t){var n="weight"in e?e.weight:void 0;return(("weight"in t?t.weight:void 0)||0)-(n||0)},e}();t.HeavySorter=l;var c=function(){function e(){}return e.prototype.sort=function(e){return e.sort(this.weightLightSort)},e.prototype.weightLightSort=function(e,t){return(("weight"in e?e.weight:void 0)||99)-(("weight"in t?t.weight:void 0)||99)},e}();t.LightSorter=c;var u=function(){function e(e){this.innerSorters=e}return e.prototype.sort=function(e){var t=a(e),n=this.innerSorters.map((function(e){return e.sort(t),a(t)})).map((function(e){return e.reduce((function(e,t,n){return e[t.id]=[n],e}),{})})).reduce((function(e,t){return Object.keys(t).forEach((function(n){e[n]=(e[n]||[]).concat(t[n])})),e}),{}),r=this.createCompareWithMap(n);return t.sort(r)},e.prototype.createCompareWithMap=function(e){return function(t,n){var r=e[t.id].reduce((function(e,t){return e+t}),0)-e[n.id].reduce((function(e,t){return e+t}),0);return 0===r?e[t.id][0]-e[n.id][0]:r}},e}();t.MultiSorter=u;var p=function(){function e(){}return e.prototype.sort=function(e){return e.sort(this.nameSorter)},e.prototype.nameSorter=function(e,t){return e.name.localeCompare(t.name)},e}();t.NameSorter=p;var d=function(){function e(){}return e.prototype.sort=function(e){return e.sort(this.oldYearSorter)},e.prototype.oldYearSorter=function(e,t){return(e.yearPublished||1/0)-(t.yearPublished||1/0)},e}();function f(e){return"plays"in e&&e.plays&&e.plays.length||0}t.OldSorter=d;var m=function(){function e(){}return e.prototype.sort=function(e){return e.sort(this.recentlySoter)},e.prototype.recentlySoter=function(e,t){return f(t)-f(e)},e}();function g(e){return"lastPlayed"in e&&e.lastPlayed&&e.lastPlayed.getTime()||0}t.PlayedALotSorter=m;var h=function(){function e(){}return e.prototype.sort=function(e){return e.sort(this.recentlySoter)},e.prototype.recentlySoter=function(e,t){return g(e)-g(t)},e}();t.PlayedLongAgoSorter=h;var y=function(){function e(){}return e.prototype.sort=function(e){return e.sort(this.recentlySoter)},e.prototype.recentlySoter=function(e,t){return f(e)-f(t)},e}();t.PlayedNotALotSorter=y;var v=function(){function e(){}return e.prototype.sort=function(e){return e.sort(this.recentlySoter)},e.prototype.recentlySoter=function(e,t){return g(t)-g(e)},e}();t.RecentlyPlayedSorter=v;var b=function(){function e(e){this.playerCount=e}return e.prototype.sort=function(e){return void 0!==this.playerCount?e.sort(this.getSuggestedComparatorComparator(this.playerCount)):e},e.prototype.getSuggestedComparatorComparator=function(e){var t=this;return function(n,r){return t.getSuggestePlayerScore(e,r)-t.getSuggestePlayerScore(e,n)}},e.prototype.getSuggestePlayerScore=function(e,t){if("suggestedNumberOfPlayers"in t){var n=t.suggestedNumberOfPlayers[e]||t.suggestedNumberOfPlayers[1/0];if(void 0!==n){var r=n.best+n.recommended+n.notRecommended;return n.best/r*3+n.recommended/r-n.notRecommended/r*2}}return-1/0},e}();t.SuggestedPlayersSorter=b;var S=function(){function e(){this.userRatingSorter=this.userRatingSorter.bind(this)}return e.prototype.sort=function(e){return e.sort(this.userRatingSorter)},e.prototype.userRatingSorter=function(e,t){var n=this.getAverageUserRating(e);return(this.getAverageUserRating(t)||0)-(n||0)},e.prototype.getAverageUserRating=function(e){var t=e.userRating;if(t){var n=Object.keys(t).filter((function(e){return t[e]}));if(0===n.length)return;return n.reduce((function(e,n){return e+t[n]}),0)/n.length}},e}();t.UserRatingSorter=S;var w=function(){function e(){}return e.prototype.sort=function(e){return e.sort(this.newYearSorter)},e.prototype.newYearSorter=function(e,t){return(t.yearPublished||-1e5)-(e.yearPublished||-1e4)},e}();t.YoungSorter=w;var G={alphabetic:new p,bggrating:new s,new:new w,old:new d,userrating:new S,"weight-heavy":new l,"weight-light":new c,playedRecently:new v,playedLongAgo:new h,playedALot:new m,playedNotALot:new y};function x(e){if(void 0===e&&(e="bggrating"),Array.isArray(e)){var t=e.map(x);return new u(t)}return"object"===o(e)?new b(e.numberOfPlayers):G[e]}var E=i(x),C=function(){function e(){this.sortCollection=i(this.sortCollectionInner)}return e.prototype.sortCollectionInner=function(e,t){return E(t).sort(e)},e}();t.GameSorter=C;var I=function(){function e(){this.filterCollectionInner=this.filterCollectionInner.bind(this),this.filterCollection=i(this.filterCollectionInner)}return e.prototype.filterCollectionInner=function(e,t){var n=t.playtime,r=t.playerCount;return n&&(e=this.filterOnTime(e,n)),r&&(e=this.filterOnPlayerCount(e,r)),e},e.prototype.filterOnTime=function(e,t){var n=t.minimum,r=void 0===n?0:n,o=t.maximum,a=void 0===o?1/0:o;return e.filter((function(e){return r<=(e.minPlaytime||0)&&(e.maxPlaytime||1/0)<=a}))},e.prototype.filterOnPlayerCount=function(e,t){return e.filter((function(e){return e.minPlayers<=t&&t<=e.maxPlayers}))},e}();t.GameFilterer=I;var P,A,N=function(){function e(e,t){void 0===e&&(e=new C),void 0===t&&(t=new I),this.sorter=e,this.filterer=t,this.filterAndSortInner=this.filterAndSortInner.bind(this),this.filterAndSort=i(this.filterAndSortInner)}return e.prototype.filterAndSortInner=function(e,t){void 0===t&&(t={});var n=a(e),r=this.filterer.filterCollection(n,t);return this.sorter.sortCollection(r,t.sortOption)},e}();t.GamesFilterAndSorter=N,(P="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(P.register(a,"__spreadArrays","/app/src/services/GamesFilterAndSorter.ts"),P.register(s,"BggRatingSorter","/app/src/services/GamesFilterAndSorter.ts"),P.register(l,"HeavySorter","/app/src/services/GamesFilterAndSorter.ts"),P.register(c,"LightSorter","/app/src/services/GamesFilterAndSorter.ts"),P.register(u,"MultiSorter","/app/src/services/GamesFilterAndSorter.ts"),P.register(p,"NameSorter","/app/src/services/GamesFilterAndSorter.ts"),P.register(d,"OldSorter","/app/src/services/GamesFilterAndSorter.ts"),P.register(f,"getSafePlayCount","/app/src/services/GamesFilterAndSorter.ts"),P.register(m,"PlayedALotSorter","/app/src/services/GamesFilterAndSorter.ts"),P.register(g,"getSafeLastPlayed","/app/src/services/GamesFilterAndSorter.ts"),P.register(h,"PlayedLongAgoSorter","/app/src/services/GamesFilterAndSorter.ts"),P.register(y,"PlayedNotALotSorter","/app/src/services/GamesFilterAndSorter.ts"),P.register(v,"RecentlyPlayedSorter","/app/src/services/GamesFilterAndSorter.ts"),P.register(b,"SuggestedPlayersSorter","/app/src/services/GamesFilterAndSorter.ts"),P.register(S,"UserRatingSorter","/app/src/services/GamesFilterAndSorter.ts"),P.register(w,"YoungSorter","/app/src/services/GamesFilterAndSorter.ts"),P.register(G,"sortMap","/app/src/services/GamesFilterAndSorter.ts"),P.register("bggrating","DEFAULT_OPTION","/app/src/services/GamesFilterAndSorter.ts"),P.register(x,"getSorterInner","/app/src/services/GamesFilterAndSorter.ts"),P.register(E,"getSorter","/app/src/services/GamesFilterAndSorter.ts"),P.register(C,"GameSorter","/app/src/services/GamesFilterAndSorter.ts"),P.register(I,"GameFilterer","/app/src/services/GamesFilterAndSorter.ts"),P.register(N,"GamesFilterAndSorter","/app/src/services/GamesFilterAndSorter.ts")),(A="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&A(e)}).call(this,n(37)(e))},527:function(e,t,n){"use strict";(function(e){var r;(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,s=a.length;i<s;i++,o++)r[o]=a[i];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionMerger=void 0;var s=n(257),l=function(){function e(){this.getMergedCollection=s(this.getMergedCollectionInner)}return e.prototype.getMergedCollectionInner=function(e){var t={},n=new Set;return Object.keys(e).forEach((function(r){e[r].forEach((function(e){var o=t[e.id];o?(o.owners.push(r),e.userRating&&(o.userRating?(n.has(e.id)&&(o.userRating=Object.assign({},o.userRating),n.delete(e.id)),Object.assign(o.userRating,e.userRating)):o.userRating=Object.assign({},e.userRating))):(t[e.id]=Object.assign({},e,{owners:[r]}),e.userRating&&n.add(e.id))}))})),Object.values(t)},e}();t.CollectionMerger=l;var c,u,p=function(){function e(e,t,n){void 0===n&&(n=!1),this.collectionMap={},this.extraInfoMap={},this.playsMap={},this.currentNames=[],this.loadingInfo=[],this.eventHandlers=[],this.loadingEventHandlers=[],this.concurrentRequestLimit=5,this.service=e,this.loadCollections=this.loadCollections.bind(this),this.loadCollectionWithRetry=this.loadCollectionWithRetry.bind(this),this.getAllGamesPlus=this.getAllGamesPlus.bind(this),this.getAllGamesPlusPure=this.getAllGamesPlusPure.bind(this),this.informCollectionUpdateHandlers=this.informCollectionUpdateHandlers.bind(this),this.getAllGamesPlusPureMemo=s(this.getAllGamesPlusPure),this.getShownGamesMapMemo=s(this.getShownGamesMap),this.getGamesWithExtraInfoMemo=s(this.getGamesWithExtraInfo),this.getGamesWithPlayInfoMemo=s(this.getGamesWithPlayInfo),this.merger=t,this.useCache=n,this.extraInfoMap={},this.loadCollectionsFromCache(),this.loadExtraInfo(),this.setStorageVersion()}return e.prototype.loadCollections=function(e){return o(this,void 0,void 0,(function(){var t=this;return a(this,(function(n){switch(n.label){case 0:return this.currentNames=e,this.informCollectionUpdateHandlers(),[4,Promise.all(e.map((function(e){return o(t,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return[4,this.loadCollectionWithRetry(e)];case 1:return t=n.sent(),this.collectionMap[e]=t,this.storeCollections(),this.informCollectionUpdateHandlers(),[2,t]}}))}))})))];case 1:return[2,n.sent()]}}))}))},e.prototype.loadExtendedInfo=function(){return o(this,void 0,void 0,(function(){var e,t,n,r,o=this;return a(this,(function(a){switch(a.label){case 0:return e=this.getAllGamesPlus(),t=e.filter((function(e){return void 0===o.extraInfoMap[e.id]})),n=t.map((function(e){return{type:"game",isLoading:!1,gameinfo:e}})),this.loadingInfo=i(n,this.loadingInfo),r=this.chunk(t,50),[4,Promise.all(r.map((function(e){return o.loadGamesWithRetry(e).then((function(t){return t.forEach((function(t,n){o.extraInfoMap[e[n].id]=t})),o.informCollectionUpdateHandlers(),t}))}))).then((function(e){return o.storeExtraInfo(),e}))];case 1:return[2,a.sent()]}}))}))},e.prototype.chunk=function(e,t){for(var n=[],r=i(e),o=Math.ceil(r.length/t),a=0;a<o;a++)n.push(r.splice(0,t));return n},e.prototype.storeExtraInfo=function(){localStorage&&this.useCache&&localStorage.setItem("extrainfo",JSON.stringify(this.extraInfoMap))},e.prototype.loadExtraInfo=function(){if(this.extraInfoMap={},localStorage&&this.useCache){"2"!==localStorage.getItem("storageVersion")&&localStorage.removeItem("extrainfo");var e=JSON.parse(localStorage.getItem("extrainfo"));e&&(this.extraInfoMap=e)}},e.prototype.setStorageVersion=function(){localStorage&&this.useCache&&localStorage.setItem("storageVersion","2")},e.prototype.storeCollections=function(){localStorage&&this.useCache&&localStorage.setItem("collections",JSON.stringify(this.collectionMap))},e.prototype.loadCollectionsFromCache=function(){if(this.collectionMap={},localStorage&&this.useCache){"2"!==localStorage.getItem("storageVersion")&&localStorage.removeItem("collections");var e=JSON.parse(localStorage.getItem("collections"));e&&(this.collectionMap=e)}},e.prototype.getShownGamesMap=function(e,t){return e.reduce((function(e,n){var r=t[n];return r&&(e[n]=r),e}),{})},e.prototype.getGamesWithExtraInfo=function(e,t){return e.map((function(e){return Object.assign({},e,t[e.id]||{})}))},e.prototype.getGamesWithPlayInfo=function(e,t,n){return Object.keys(n).length>0?t.map((function(t){var r=[];e.forEach((function(e){var o=n[e];if(o)for(var a=0;a<o.length;a++){var i=o[a];i.gameId===t.id&&r.push(Object.assign({},i,{playedBy:e}))}}));var o=r.reduce((function(e,t){return Math.max(e,t.date.getTime())}),0),a=r.reduce((function(e,t){return e+(t.length||0)}),0),i={plays:r,lastPlayed:o?new Date(o):void 0,timePlayedMinutes:a};return Object.assign({},t,i)})):t},e.prototype.getAllGamesPlus=function(){var e=this.currentNames,t=this.collectionMap,n=this.extraInfoMap,r=this.playsMap;return this.getAllGamesPlusPureMemo(e,t,n,r)},e.prototype.getAllGamesPlusPure=function(e,t,n,r){var o=this.getShownGamesMapMemo(e,t),a=this.merger.getMergedCollection(o),i=this.getGamesWithExtraInfoMemo(a,n);return this.getGamesWithPlayInfoMemo(e,i,r)},e.prototype.informCollectionUpdateHandlers=function(){var e=this.getAllGamesPlus();this.eventHandlers.forEach((function(t){return t(e)}))},e.prototype.informLoadingHandlers=function(){var e=this.getLoadingInfo();this.loadingEventHandlers.forEach((function(t){return t(e)}))},e.prototype.loadPlays=function(){return o(this,void 0,void 0,(function(){var e,t=this;return a(this,(function(n){return e=this.currentNames,[2,Promise.all(e.map((function(e){return o(t,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return this.loadingInfo=this.loadingInfo.filter((function(t){return"plays"!==t.type||"plays"===t.type&&t.username!==e})),this.loadingInfo.push({isLoading:!0,type:"plays",username:e}),this.informLoadingHandlers(),[4,this.loadPlaysWithRetry(e)];case 1:return t=n.sent(),this.playsMap[e]=t,this.loadingInfo=this.loadingInfo.filter((function(t){return"plays"!==t.type||"plays"===t.type&&t.username!==e})),this.informLoadingHandlers(),this.informCollectionUpdateHandlers(),[2]}}))}))})))]}))}))},e.prototype.loadPlaysWithRetry=function(e){return o(this,void 0,void 0,(function(){var t,n,r=this;return a(this,(function(o){switch(o.label){case 0:return[4,this.service.getPlays(e)];case 1:return t=o.sent(),Array.isArray(t)?[2,t]:(n=t&&t.backoff?1e4:1e3,[2,new Promise((function(t){setTimeout((function(){return t(r.loadPlaysWithRetry(e))}),n)}))])}}))}))},e.prototype.loadCollectionWithRetry=function(e){return o(this,void 0,void 0,(function(){var t,n,r=this;return a(this,(function(o){switch(o.label){case 0:return this.loadingInfo=this.loadingInfo.filter((function(t){return"collection"===t.type&&t.username!==e})),this.loadingInfo.push({isLoading:!0,type:"collection",username:e}),this.informLoadingHandlers(),[4,this.service.getUserCollection(e)];case 1:return t=o.sent(),Array.isArray(t)?(this.loadingInfo=this.loadingInfo.filter((function(t){return"collection"===t.type&&t.username!==e})),this.informLoadingHandlers(),[2,t]):(n=t&&t.backoff?1e4:1e3,[2,new Promise((function(t){setTimeout((function(){return t(r.loadCollectionWithRetry(e))}),n)}))])}}))}))},e.prototype.loadGamesWithRetry=function(e){return o(this,void 0,void 0,(function(){var t,n,r,o=this;return a(this,(function(a){switch(a.label){case 0:return(t=e.map((function(e){return e.id}))).forEach((function(e){var t=o.loadingInfo.findIndex((function(t){return"game"===t.type&&t.gameinfo.id===e}));o.loadingInfo[t].isLoading=!0,o.loadingInfo[t].retryInfo=void 0})),this.informLoadingHandlers(),[4,this.service.getGamesInfo(t)];case 1:return"retryLater"in(n=a.sent())?(r=n&&n.backoff?1e4:3e3,n&&n.backoff&&(this.concurrentRequestLimit=Math.max(this.concurrentRequestLimit-1,1)),t.forEach((function(e){var t=o.loadingInfo.findIndex((function(t){return"game"===t.type&&t.gameinfo.id===e}));o.loadingInfo[t].retryInfo=n})),this.informLoadingHandlers(),[2,new Promise((function(t){setTimeout((function(){return t(o.loadGamesWithRetry(e))}),r)}))]):(t.forEach((function(e){o.loadingInfo=o.loadingInfo.filter((function(t){return"game"!==t.type||t.gameinfo.id!==e}))})),this.informLoadingHandlers(),[2,n])}}))}))},e.prototype.onGamesUpdate=function(e){this.eventHandlers.push(e)},e.prototype.getLoadingInfo=function(){return this.loadingInfo},e.prototype.onLoadUpdate=function(e){this.loadingEventHandlers.push(e)},e}();t.default=p,(c="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(c.register(o,"__awaiter","/app/src/services/BggGameLoader.ts"),c.register(a,"__generator","/app/src/services/BggGameLoader.ts"),c.register(i,"__spreadArrays","/app/src/services/BggGameLoader.ts"),c.register(l,"CollectionMerger","/app/src/services/BggGameLoader.ts"),c.register("2","storageVersion","/app/src/services/BggGameLoader.ts"),c.register(p,"BggGameLoader","/app/src/services/BggGameLoader.ts")),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&u(e)}).call(this,n(37)(e))},528:function(e,t,n){"use strict";(function(e){var r;(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}l((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},l=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,s=a.length;i<s;i++,o++)r[o]=a[i];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectUserInput=void 0;var c=n(0),u=n(161),p=function(e){function t(t){var n=e.call(this,t)||this;return n.onInputChange=n.onInputChange.bind(n),n.getNamesToShow=n.getNamesToShow.bind(n),n.onAddClick=n.onAddClick.bind(n),n.onDeleteClick=n.onDeleteClick.bind(n),n.onUseClick=n.onUseClick.bind(n),n}return a(t,e),t.prototype.onInputChange=function(e,t){if(console.log("[DEBUG] SelectUserInput: Input changed at index "+t+" to value: '"+e+"'"),this.props.onNameChange){var n=this.props.bggNames||[],r=l(n);r[t]=e,this.props.onNameChange(r)}},t.prototype.onAddClick=function(){if(this.props.onNameChange){var e=this.getNamesToShow().concat([""]);this.props.onNameChange(e)}},t.prototype.onDeleteClick=function(e){if(this.props.onNameChange&&this.props.bggNames){var t=l(this.props.bggNames);t.splice(e,1),this.props.onNameChange(t)}},t.prototype.getNamesToShow=function(){var e=this.props.bggNames;return void 0===e||0===e.length?[""]:l(e)},t.prototype.onUseClick=function(){console.log("[DEBUG] SelectUserInput: 'Use' button clicked. Current names:",this.props.bggNames);var e=this.props.onNameSelect;e?e(this.props.bggNames.map((function(e){return e.trim()}))):console.warn("[DEBUG] SelectUserInput: onNameSelect prop is missing!")},t.prototype.render=function(){var e=this,t=this.getNamesToShow(),n=t.length>1,r=this.props,o=r.validNames,a=void 0===o?[]:o,i=r.loadingNames,s=void 0===i?[]:i,l=r.invalidNames,p=void 0===l?[]:l,d=t.length>0&&""!==t[0],f="Can you help "+(1===t.length?"me":"us")+" find a game to play?",m=d&&t.every((function(e){return a.indexOf(e)>-1}));return console.log("[DEBUG] SelectUserInput Render:",{namesToShow:t,validNames:a,invalidNames:p,loadingNames:s,hasEnoughNames:d,canUseNames:m,buttonDisabled:!m}),c.createElement("div",null,t.map((function(r,o){var i=a.indexOf(r)>-1,l=p.indexOf(r)>-1,d=s.indexOf(r)>-1,f=o===t.length-1,m="Input"+o,g=i?{icon:"check","data-testid":m+"Valid"}:null;l&&(g={icon:"warning sign","data-testid":m+"Invalid",color:"red"});var h=n?c.createElement(u.Icon,{"data-testid":m+"Delete",style:{cursor:"pointer"},name:"remove",className:"link",onClick:function(){return e.onDeleteClick(o)}}):null;return c.createElement("div",{key:m,className:"field"},c.createElement(u.Input,{labelPosition:"left corner",placeholder:"BGG Username",label:g,input:{"data-testid":m},icon:h,loading:d,value:r,"data-testid":d?m+"Loading":null,type:"text",autoFocus:f,onChange:function(t){return e.onInputChange(t.target.value,o)}}))})),c.createElement("div",{className:"field"},c.createElement("button",{"data-testid":"AddButton",onClick:function(){return e.onAddClick()},className:"ui basic button tiny"},c.createElement("i",{className:"icon plus"}),"Add a friend")),c.createElement("div",{className:"field"},c.createElement("button",{"data-testid":"UseNames",disabled:!m,onClick:this.onUseClick,className:"ui basic button large"},f)))},t}(c.PureComponent);t.SelectUserInput=p;var d,f,m={shownNames:[],validNames:[],invalidNames:[],loadingNames:[]},g=function(e){function t(t){var n=e.call(this,t)||this;return n.onNamesChange=n.onNamesChange.bind(n),n.state=m,n.doesNameNeedValidation=n.doesNameNeedValidation.bind(n),n.isNameShown=n.isNameShown.bind(n),n.setNameLoading=n.setNameLoading.bind(n),n.setNameValidity=n.setNameValidity.bind(n),n}return a(t,e),t.prototype.doesNameNeedValidation=function(e){if(""===e||void 0===e)return!1;var t=this.state,n=t.validNames,r=t.invalidNames,o=t.loadingNames;return this.props.userValidator?!(n.indexOf(e)>-1||r.indexOf(e)>-1||o.indexOf(e)>-1):(console.warn("[DEBUG] ValidatingUserInput: No userValidator prop provided"),!1)},t.prototype.isNameShown=function(e){return this.state.shownNames.indexOf(e)>-1},t.prototype.setNameLoading=function(e,t){console.log("[DEBUG] ValidatingUserInput: setNameLoading name="+e+" loading="+t),t?this.setState({loadingNames:l(this.state.loadingNames,[e])}):this.setState({loadingNames:this.state.loadingNames.filter((function(t){return t!==e}))})},t.prototype.setNameValidity=function(e,t){console.log("[DEBUG] ValidatingUserInput: setNameValidity name="+e+" isValid="+t),t?this.setState({validNames:l(this.state.validNames,[e])}):this.setState({invalidNames:l(this.state.invalidNames,[e])})},t.prototype.onNamesChange=function(e){var t=this,n=this.doesNameNeedValidation,r=this.isNameShown,o=this.setNameValidity,a=this.setNameLoading,l=this.props.userValidator;console.log("[DEBUG] ValidatingUserInput: onNamesChange called with:",e),this.setState({shownNames:e});var c=e.filter(n);console.log("[DEBUG] ValidatingUserInput: Names requiring validation:",c),c.forEach((function(e){setTimeout((function(){return i(t,void 0,void 0,(function(){var t,i;return s(this,(function(s){switch(s.label){case 0:if(!r(e)||!n(e))return[3,5];console.log("[DEBUG] ValidatingUserInput: Starting validation for '"+e+"'"),a(e,!0),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,l(e)];case 2:return t=s.sent(),console.log("[DEBUG] ValidatingUserInput: Validator returned "+t+" for '"+e+"'"),o(e,t),[3,4];case 3:return i=s.sent(),console.error("[DEBUG] ValidatingUserInput: Error validating user:",i),o(e,!1),[3,4];case 4:a(e,!1),s.label=5;case 5:return[2]}}))}))}),300)}))},t.prototype.render=function(){var e=this.state,t=e.validNames,n=e.shownNames,r=e.loadingNames,o=e.invalidNames,a=this.props.onNameSelect;return c.createElement("div",null,c.createElement(u.Header,{as:"h4",style:{marginTop:"2em"}},"Hi ",n.length<=1?"my name is":"our names are"),c.createElement(p,{bggNames:n,validNames:t,invalidNames:o,onNameChange:this.onNamesChange,loadingNames:r,onNameSelect:a}))},t}(c.Component);t.default=g,(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(d.register(a,"__extends","/app/src/components/ValidatingUserInput.tsx"),d.register(i,"__awaiter","/app/src/components/ValidatingUserInput.tsx"),d.register(s,"__generator","/app/src/components/ValidatingUserInput.tsx"),d.register(l,"__spreadArrays","/app/src/components/ValidatingUserInput.tsx"),d.register(p,"SelectUserInput","/app/src/components/ValidatingUserInput.tsx"),d.register(m,"initialState","/app/src/components/ValidatingUserInput.tsx"),d.register(g,"ValidatingUserInput","/app/src/components/ValidatingUserInput.tsx")),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&f(e)}).call(this,n(37)(e))},529:function(e,t,n){var r=n(530),o=n(531);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};r(o,a);e.exports=o.locals||{}},531:function(e,t,n){(t=n(532)(!1)).push([e.i,"body > .grid {\n  height: 100%;\n}\n.givenames {\n  height: 100%;\n}\n\n.givenames .column{\n  max-width: 400px;\n}\ndiv#content{\n  height:100%;\n}\n\n\n.main.container{\n      margin-top:1em;\n  }\n\n\n.topMenu{\n  background-color: white;\n  text-align: center;\n  padding-top: 5px;\n  padding-bottom: 10px;\n}\n\n.topselect{\n  display: inline-block;\n  \n}\n@media (max-width: 600px) {\n  .main.container{\n      margin-top:3em;\n  }\n\n  .topMenu{\n      text-align: center;\n  }\n.topselect {\n  display: block;\n  \n}\n}\n\n.logoscript{\n  font-family: 'Satisfy', cursive;\n}\n\n\n.touchevents span.topselect .dropdown{\n  font-size: 1.4em;\n  margin-bottom: 15px;\n} \n\n.logoHeader{\n  padding: 1em;\n}",""]),e.exports=t}});
//# sourceMappingURL=cardboardbutler.4e812573ff589ae16576.min.js.map